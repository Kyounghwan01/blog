(window.webpackJsonp=window.webpackJsonp||[]).push([[241],{632:function(_,v,t){"use strict";t.r(v);var i=t(21),a=Object(i.a)({},(function(){var _=this,v=_.$createElement,t=_._self._c||v;return t("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[t("h1",{attrs:{id:"cloudfront-사용법"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cloudfront-사용법"}},[_._v("#")]),_._v(" cloudfront 사용법")]),_._v(" "),t("h2",{attrs:{id:"cloudfront-설정-가이드"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cloudfront-설정-가이드"}},[_._v("#")]),_._v(" CloudFront 설정 가이드")]),_._v(" "),t("p",[_._v("CloudFront는 AWS의 글로벌 콘텐츠 전송 네트워크(CDN) 서비스입니다. 전 세계 엣지 로케이션을 통해 콘텐츠를 빠르고 안전하게 전달합니다.")]),_._v(" "),t("iframe",{staticStyle:{border:"1px solid #ccc"},attrs:{src:"/blog/cloudfront.pdf",width:"100%",height:"800px"}}),_._v(" "),t("h2",{attrs:{id:"cloudfront-사용-이유"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cloudfront-사용-이유"}},[_._v("#")]),_._v(" CloudFront 사용 이유")]),_._v(" "),t("h3",{attrs:{id:"_1-전-세계-속도-향상-cdn"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-전-세계-속도-향상-cdn"}},[_._v("#")]),_._v(" 1. 전 세계 속도 향상 (CDN)")]),_._v(" "),t("ul",[t("li",[_._v("전 세계 엣지 로케이션에서 콘텐츠 제공")]),_._v(" "),t("li",[_._v("사용자에게 가장 가까운 엣지에서 응답")]),_._v(" "),t("li",[_._v("지연 시간 감소, 로딩 속도 향상")])]),_._v(" "),t("h3",{attrs:{id:"_2-서버-부하-감소"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-서버-부하-감소"}},[_._v("#")]),_._v(" 2. 서버 부하 감소")]),_._v(" "),t("ul",[t("li",[_._v("정적 파일(이미지, CSS, JS)을 엣지에서 제공")]),_._v(" "),t("li",[_._v("Origin 서버로의 요청 감소")]),_._v(" "),t("li",[_._v("비용 절감 및 확장성 향상")])]),_._v(" "),t("h3",{attrs:{id:"_3-보안-강화"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-보안-강화"}},[_._v("#")]),_._v(" 3. 보안 강화")]),_._v(" "),t("ul",[t("li",[_._v("DDoS 보호")]),_._v(" "),t("li",[_._v("SSL/TLS 인증서 관리")]),_._v(" "),t("li",[_._v("AWS WAF 통합 가능")])]),_._v(" "),t("h3",{attrs:{id:"_4-비용-절감"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-비용-절감"}},[_._v("#")]),_._v(" 4. 비용 절감")]),_._v(" "),t("ul",[t("li",[_._v("데이터 전송 비용 절감")]),_._v(" "),t("li",[_._v("Origin 서버 트래픽 감소")])]),_._v(" "),t("h2",{attrs:{id:"아키텍처-구조"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#아키텍처-구조"}},[_._v("#")]),_._v(" 아키텍처 구조")]),_._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[_._v("사용자\n  ↓\nCloudFront (예: dvxdhr3817qmv.cloudfront.net)\n  ↓\nOrigin 서버 (ALB, App Runner, S3 등)\n  ↓\n애플리케이션\n")])])]),t("h2",{attrs:{id:"주요-설정"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#주요-설정"}},[_._v("#")]),_._v(" 주요 설정")]),_._v(" "),t("h3",{attrs:{id:"⚠️-중요-설정-사항"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#⚠️-중요-설정-사항"}},[_._v("#")]),_._v(" ⚠️ 중요 설정 사항")]),_._v(" "),t("p",[t("strong",[_._v("배포 시 주의사항:")])]),_._v(" "),t("ul",[t("li",[_._v("배포 → 해당 row 선택 → 동작 → 편집")])]),_._v(" "),t("p",[t("strong",[_._v("캐시 정책:")])]),_._v(" "),t("ul",[t("li",[t("strong",[_._v("중요")]),_._v(": 기본 동작의 캐시 정책은 "),t("strong",[_._v("CachingDisabled")]),_._v("로 설정")]),_._v(" "),t("li",[_._v("Next.js 동적 콘텐츠가 정상 처리되도록 보장")])]),_._v(" "),t("p",[t("strong",[_._v("Origin 설정:")])]),_._v(" "),t("ul",[t("li",[t("strong",[_._v("중요")]),_._v(": Origin 편집 → 프로토콜은 "),t("strong",[_._v("HTTP만")]),_._v(" 사용")]),_._v(" "),t("li",[_._v("HTTPS는 CloudFront에서 처리")])]),_._v(" "),t("h3",{attrs:{id:"_1-origin-설정"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-origin-설정"}},[_._v("#")]),_._v(" 1. Origin 설정")]),_._v(" "),t("p",[t("strong",[_._v("Origin Domain")])]),_._v(" "),t("ul",[t("li",[_._v("ALB: "),t("code",[_._v("pet-web-alb-780775480.ap-northeast-2.elb.amazonaws.com")])]),_._v(" "),t("li",[_._v("App Runner: "),t("code",[_._v("jdw92camnm.ap-northeast-1.awsapprunner.com")])]),_._v(" "),t("li",[_._v("S3 버킷 등")])]),_._v(" "),t("p",[t("strong",[_._v("프로토콜")])]),_._v(" "),t("ul",[t("li",[_._v("HTTP만 사용 (포트 80)")]),_._v(" "),t("li",[_._v("HTTPS는 CloudFront에서 처리")])]),_._v(" "),t("p",[t("strong",[_._v("Origin Shield (선택사항)")])]),_._v(" "),t("ul",[t("li",[_._v("중복 요청 통합으로 Origin 비용 절감")]),_._v(" "),t("li",[_._v("성능 최적화 및 Origin 부하 감소")]),_._v(" "),t("li",[_._v("월 약 5달러 비용으로 월 20-35달러 절약 가능")])]),_._v(" "),t("h3",{attrs:{id:"_2-origin-request-policy"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-origin-request-policy"}},[_._v("#")]),_._v(" 2. Origin Request Policy")]),_._v(" "),t("p",[t("strong",[_._v("Managed-AllViewerExceptHostHeader")])]),_._v(" "),t("ul",[t("li",[_._v("Host 헤더 제거, CloudFront가 자동으로 Origin 도메인 사용")]),_._v(" "),t("li",[_._v("App Runner/ALB가 올바른 Host 헤더를 받도록 보장")])]),_._v(" "),t("h3",{attrs:{id:"_3-cache-policy"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-cache-policy"}},[_._v("#")]),_._v(" 3. Cache Policy")]),_._v(" "),t("p",[t("strong",[_._v("기본 동작 (Default Behavior)")])]),_._v(" "),t("ul",[t("li",[t("strong",[_._v("Managed-CachingDisabled")]),_._v(": 모든 요청을 Origin으로 전달")]),_._v(" "),t("li",[_._v("Next.js의 동적 콘텐츠가 정상 처리되도록 보장")])]),_._v(" "),t("p",[t("strong",[_._v("정적 파일 캐싱 (추가 Behavior)")]),_._v("\n정적 파일에 대해서는 별도의 Behavior를 생성하여 캐싱:")]),_._v(" "),t("ol",[t("li",[t("p",[t("strong",[_._v("Path Pattern")]),_._v(": "),t("code",[_._v("/_next/static/*")])]),_._v(" "),t("ul",[t("li",[_._v("Cache Policy: "),t("code",[_._v("CachingOptimized")])])])]),_._v(" "),t("li",[t("p",[t("strong",[_._v("Path Pattern")]),_._v(": "),t("code",[_._v("*.js")])]),_._v(" "),t("ul",[t("li",[_._v("Cache Policy: "),t("code",[_._v("CachingOptimized")])])])]),_._v(" "),t("li",[t("p",[t("strong",[_._v("Path Pattern")]),_._v(": "),t("code",[_._v("*.css")])]),_._v(" "),t("ul",[t("li",[_._v("Cache Policy: "),t("code",[_._v("CachingOptimized")])])])]),_._v(" "),t("li",[t("p",[t("strong",[_._v("Path Pattern")]),_._v(": "),t("code",[_._v("*.png")])]),_._v(" "),t("ul",[t("li",[_._v("Cache Policy: "),t("code",[_._v("CachingOptimized")])])])]),_._v(" "),t("li",[t("p",[t("strong",[_._v("Path Pattern")]),_._v(": "),t("code",[_._v("*.jpg")])]),_._v(" "),t("ul",[t("li",[_._v("Cache Policy: "),t("code",[_._v("CachingOptimized")])])])]),_._v(" "),t("li",[t("p",[t("strong",[_._v("Path Pattern")]),_._v(": "),t("code",[_._v("*.svg")])]),_._v(" "),t("ul",[t("li",[_._v("Cache Policy: "),t("code",[_._v("CachingOptimized")])])])])]),_._v(" "),t("h3",{attrs:{id:"_4-viewer-protocol-policy"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-viewer-protocol-policy"}},[_._v("#")]),_._v(" 4. Viewer Protocol Policy")]),_._v(" "),t("ul",[t("li",[t("strong",[_._v("Redirect HTTP to HTTPS")]),_._v(": HTTP를 HTTPS로 리다이렉트")]),_._v(" "),t("li",[_._v("보안 강화")])]),_._v(" "),t("h3",{attrs:{id:"_5-배포-타입"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-배포-타입"}},[_._v("#")]),_._v(" 5. 배포 타입")]),_._v(" "),t("p",[t("strong",[_._v("⚠️ 중요")]),_._v(": CloudFront에서 웹 배포할 때")]),_._v(" "),t("ul",[t("li",[_._v("Basic이 아니라 "),t("strong",[_._v("Premium")]),_._v("으로 변경해야 배포 가능")])]),_._v(" "),t("h2",{attrs:{id:"origin-shield-장점"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#origin-shield-장점"}},[_._v("#")]),_._v(" Origin Shield 장점")]),_._v(" "),t("h3",{attrs:{id:"_1-비용-절감"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-비용-절감"}},[_._v("#")]),_._v(" 1. 비용 절감")]),_._v(" "),t("ul",[t("li",[_._v("App Runner 서버 부하 57% 감소 → 월 20-35달러 절약")]),_._v(" "),t("li",[_._v("Origin Shield 비용 월 5달러 vs 절약 효과 월 30달러")])]),_._v(" "),t("h3",{attrs:{id:"_2-성능-향상"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-성능-향상"}},[_._v("#")]),_._v(" 2. 성능 향상")]),_._v(" "),t("ul",[t("li",[_._v("웹사이트 로딩 56% 빨라짐")]),_._v(" "),t("li",[_._v("사용자가 체감할 정도로 확실히 빨라짐")])]),_._v(" "),t("h3",{attrs:{id:"_3-서버-안정성"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-서버-안정성"}},[_._v("#")]),_._v(" 3. 서버 안정성")]),_._v(" "),t("ul",[t("li",[_._v("트래픽 몰려도 Origin 서버 안정성 유지")]),_._v(" "),t("li",[_._v("갑작스런 접속자 증가해도 버팀")])]),_._v(" "),t("h3",{attrs:{id:"_4-설정-간편"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-설정-간편"}},[_._v("#")]),_._v(" 4. 설정 간편")]),_._v(" "),t("ul",[t("li",[_._v("클릭 몇 번이면 설정 완료")]),_._v(" "),t("li",[_._v("바로 효과 나타남")])]),_._v(" "),t("p",[t("strong",[_._v("결론")]),_._v(": 월 5달러 내고 월 30달러 절약하면서 웹사이트 2배 빨라지는 효과")]),_._v(" "),t("h2",{attrs:{id:"_504-gateway-timeout-에러-해결"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_504-gateway-timeout-에러-해결"}},[_._v("#")]),_._v(" 504 Gateway Timeout 에러 해결")]),_._v(" "),t("p",[t("strong",[_._v("에러 메시지:")])]),_._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[_._v("504 Gateway Timeout ERROR\nThe request could not be satisfied.\nWe can't connect to the server for this app or website at this time.\n")])])]),t("p",[t("strong",[_._v("해결 방법:")])]),_._v(" "),t("ol",[t("li",[t("p",[t("strong",[_._v("Origin 설정 확인")])]),_._v(" "),t("ul",[t("li",[_._v("CloudFront → 배포 → Origin 편집")]),_._v(" "),t("li",[_._v("Origin domain이 올바른지 확인")]),_._v(" "),t("li",[_._v("프로토콜이 HTTP만 사용되는지 확인")])])]),_._v(" "),t("li",[t("p",[t("strong",[_._v("Origin 서버 상태 확인")])]),_._v(" "),t("ul",[t("li",[_._v("ALB/App Runner가 정상 작동하는지 확인")]),_._v(" "),t("li",[_._v("헬스 체크 상태 확인")])])]),_._v(" "),t("li",[t("p",[t("strong",[_._v("Origin Request Policy 확인")])]),_._v(" "),t("ul",[t("li",[_._v("Host 헤더가 올바르게 전달되는지 확인")])])])]),_._v(" "),t("h2",{attrs:{id:"현재-설정-요약"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#현재-설정-요약"}},[_._v("#")]),_._v(" 현재 설정 요약")]),_._v(" "),t("h3",{attrs:{id:"app-runner를-origin으로-사용하는-경우"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#app-runner를-origin으로-사용하는-경우"}},[_._v("#")]),_._v(" App Runner를 Origin으로 사용하는 경우")]),_._v(" "),t("p",[t("strong",[_._v("Origin 설정:")])]),_._v(" "),t("ul",[t("li",[_._v("Origin domain: "),t("code",[_._v("xxxx.awsapprunner.com")])]),_._v(" "),t("li",[_._v("Protocol: HTTPS only")]),_._v(" "),t("li",[_._v("Port: 443")])]),_._v(" "),t("p",[t("strong",[_._v("정책:")])]),_._v(" "),t("ul",[t("li",[_._v("Origin Request Policy: "),t("code",[_._v("Managed-AllViewerExceptHostHeader")])]),_._v(" "),t("li",[_._v("Cache Policy: "),t("code",[_._v("Managed-CachingDisabled")]),_._v(" (기본 동작)")]),_._v(" "),t("li",[_._v("Viewer Protocol Policy: Redirect HTTP to HTTPS")])]),_._v(" "),t("h3",{attrs:{id:"alb를-origin으로-사용하는-경우"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#alb를-origin으로-사용하는-경우"}},[_._v("#")]),_._v(" ALB를 Origin으로 사용하는 경우")]),_._v(" "),t("p",[t("strong",[_._v("Origin 설정:")])]),_._v(" "),t("ul",[t("li",[_._v("Origin domain: "),t("code",[_._v("xxxx.elb.amazonaws.com")])]),_._v(" "),t("li",[_._v("Protocol: HTTP only")]),_._v(" "),t("li",[_._v("Port: 80")])]),_._v(" "),t("p",[t("strong",[_._v("정책:")])]),_._v(" "),t("ul",[t("li",[_._v("Origin Request Policy: "),t("code",[_._v("Managed-AllViewerExceptHostHeader")])]),_._v(" "),t("li",[_._v("Cache Policy: "),t("code",[_._v("Managed-CachingDisabled")]),_._v(" (기본 동작)")]),_._v(" "),t("li",[_._v("Viewer Protocol Policy: Redirect HTTP to HTTPS")])]),_._v(" "),t("h2",{attrs:{id:"향후-개선-가능한-부분"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#향후-개선-가능한-부분"}},[_._v("#")]),_._v(" 향후 개선 가능한 부분")]),_._v(" "),t("ol",[t("li",[t("p",[t("strong",[_._v("선택적 캐싱")])]),_._v(" "),t("ul",[t("li",[_._v("정적 파일("),t("code",[_._v("/_next/static/**")]),_._v(", "),t("code",[_._v("/images/**")]),_._v(")만 캐싱")]),_._v(" "),t("li",[_._v("동적 콘텐츠는 Origin으로 전달")]),_._v(" "),t("li",[_._v("성능과 최신성의 균형")])])]),_._v(" "),t("li",[t("p",[t("strong",[_._v("캐시 무효화")])]),_._v(" "),t("ul",[t("li",[_._v("배포 후 특정 경로의 캐시 무효화")]),_._v(" "),t("li",[_._v("즉시 업데이트 반영")])])]),_._v(" "),t("li",[t("p",[t("strong",[_._v("압축 활성화")])]),_._v(" "),t("ul",[t("li",[_._v("Gzip/Brotli 압축으로 전송량 감소")]),_._v(" "),t("li",[_._v("로딩 속도 향상")])])])]),_._v(" "),t("h2",{attrs:{id:"참고사항"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#참고사항"}},[_._v("#")]),_._v(" 참고사항")]),_._v(" "),t("ul",[t("li",[_._v("CloudFront는 전 세계 사용자에게 빠른 콘텐츠 전달을 제공합니다")]),_._v(" "),t("li",[_._v("Origin 서버 부하를 크게 감소시킵니다")]),_._v(" "),t("li",[_._v("SSL/TLS 인증서를 자동으로 관리합니다")]),_._v(" "),t("li",[_._v("커스텀 도메인 연결이 가능합니다")]),_._v(" "),t("li",[_._v("현재 설정은 동적 콘텐츠를 위해 기본 동작에서 캐싱을 비활성화하고 있습니다")])]),_._v(" "),t("TagLinks"),_._v(" "),t("Comment")],1)}),[],!1,null,null,null);v.default=a.exports}}]);