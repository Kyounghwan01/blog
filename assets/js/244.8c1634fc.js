(window.webpackJsonp=window.webpackJsonp||[]).push([[244],{620:function(t,s,a){"use strict";a.r(s);var _=a(21),v=Object(_.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"codepipeline-사용법"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#codepipeline-사용법"}},[t._v("#")]),t._v(" codepipeline 사용법")]),t._v(" "),a("h2",{attrs:{id:"codepipeline-설정-가이드"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#codepipeline-설정-가이드"}},[t._v("#")]),t._v(" codepipeline 설정 가이드")]),t._v(" "),a("p",[t._v("CodeBuild는 AWS에서 제공하는 완전 관리형 빌드 서비스입니다. 소스 코드를 컴파일하고, 테스트를 실행하며, 배포 가능한 소프트웨어 패키지를 생성합니다.")]),t._v(" "),a("iframe",{staticStyle:{border:"1px solid #ccc"},attrs:{src:"/blog/codebuild.pdf",width:"100%",height:"800px"}}),t._v(" "),a("h2",{attrs:{id:"codebuild-프로젝트-구성"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#codebuild-프로젝트-구성"}},[t._v("#")]),t._v(" CodeBuild 프로젝트 구성")]),t._v(" "),a("h3",{attrs:{id:"_1-프로젝트-기본-설정"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-프로젝트-기본-설정"}},[t._v("#")]),t._v(" 1. 프로젝트 기본 설정")]),t._v(" "),a("p",[a("strong",[t._v("프로젝트 이름")])]),t._v(" "),a("ul",[a("li",[t._v("프로젝트 이름은 2~255자여야 합니다")]),t._v(" "),a("li",[t._v("영문자(A-Z, a-z), 숫자(0-9), 특수 문자(-, _)를 사용할 수 있습니다")]),t._v(" "),a("li",[t._v("예시: "),a("code",[t._v("pet-web")])])]),t._v(" "),a("p",[a("strong",[t._v("프로젝트 유형")])]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("기본 프로젝트")]),t._v(": 사용자 지정 CodeBuild 프로젝트 생성")]),t._v(" "),a("li",[a("strong",[t._v("러너 프로젝트")]),t._v(": GitHub Actions, GitLab, Buildkite 등에서 사용할 관리형 러너 생성")])]),t._v(" "),a("h3",{attrs:{id:"_2-소스-설정"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-소스-설정"}},[t._v("#")]),t._v(" 2. 소스 설정")]),t._v(" "),a("p",[a("strong",[t._v("소스 공급자")])]),t._v(" "),a("ul",[a("li",[t._v("AWS CodeCommit, GitHub, Bitbucket, S3 등에서 선택 가능")]),t._v(" "),a("li",[t._v("예시: CodeCommit의 "),a("code",[t._v("pet-web")]),t._v(" 리포지토리 사용")])]),t._v(" "),a("p",[a("strong",[t._v("참조 유형")])]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("브랜치")]),t._v(": 특정 브랜치 선택 (예: "),a("code",[t._v("main")]),t._v(")")]),t._v(" "),a("li",[a("strong",[t._v("Git 태그")]),t._v(": 특정 태그 선택")]),t._v(" "),a("li",[a("strong",[t._v("커밋 ID")]),t._v(": 특정 커밋 ID 지정 (빌드 시간 단축 가능)")])]),t._v(" "),a("h3",{attrs:{id:"_3-환경-설정"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-환경-설정"}},[t._v("#")]),t._v(" 3. 환경 설정")]),t._v(" "),a("p",[a("strong",[t._v("환경 이미지")])]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("관리형 이미지")]),t._v(": AWS CodeBuild가 제공하는 이미지 사용")]),t._v(" "),a("li",[a("strong",[t._v("사용자 지정 이미지")]),t._v(": Docker 이미지 직접 지정")])]),t._v(" "),a("p",[a("strong",[t._v("실행 모드")])]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("컨테이너")]),t._v(": Docker 컨테이너에서 실행 (권장)")]),t._v(" "),a("li",[a("strong",[t._v("인스턴스")]),t._v(": EC2 인스턴스에서 직접 실행")])]),t._v(" "),a("p",[a("strong",[t._v("운영 체제 및 런타임")])]),t._v(" "),a("ul",[a("li",[t._v("운영 체제: Ubuntu, Amazon Linux 등")]),t._v(" "),a("li",[t._v("런타임: Standard, Docker 등")]),t._v(" "),a("li",[t._v("이미지: "),a("code",[t._v("aws/codebuild/standard:7.0")]),t._v(" 등")])]),t._v(" "),a("p",[a("strong",[t._v("컴퓨팅 리소스")])]),t._v(" "),a("ul",[a("li",[t._v("3GB 메모리, vCPU 2개 (기본)")]),t._v(" "),a("li",[t._v("7GB 메모리, vCPU 4개")]),t._v(" "),a("li",[t._v("15GB 메모리, vCPU 8개")]),t._v(" "),a("li",[t._v("70GB 메모리, vCPU 36개")]),t._v(" "),a("li",[t._v("145GB 메모리, vCPU 72개")])]),t._v(" "),a("h3",{attrs:{id:"_4-서비스-역할"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-서비스-역할"}},[t._v("#")]),t._v(" 4. 서비스 역할")]),t._v(" "),a("p",[a("strong",[t._v("서비스 역할 생성")])]),t._v(" "),a("ul",[a("li",[t._v("CodeBuild가 다른 AWS 서비스에 접근하기 위한 IAM 역할")]),t._v(" "),a("li",[t._v("역할 이름: "),a("code",[t._v("codebuild-[프로젝트명]-service-role")])]),t._v(" "),a("li",[t._v("예시: "),a("code",[t._v("codebuild-pet-web-service-role")])])]),t._v(" "),a("h3",{attrs:{id:"_5-추가-구성"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-추가-구성"}},[t._v("#")]),t._v(" 5. 추가 구성")]),t._v(" "),a("p",[a("strong",[t._v("제한 시간")])]),t._v(" "),a("ul",[a("li",[t._v("기본 제한 시간: 1시간")]),t._v(" "),a("li",[t._v("설정 범위: 5분 ~ 36시간")])]),t._v(" "),a("p",[a("strong",[t._v("대기 중인 제한 시간")])]),t._v(" "),a("ul",[a("li",[t._v("빌드 대기열 기본 시간: 8시간")]),t._v(" "),a("li",[t._v("설정 범위: 5분 ~ 8시간")])]),t._v(" "),a("p",[a("strong",[t._v("권한 설정")])]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("권한이 있음")]),t._v(": Docker 이미지를 빌드하거나 빌드의 권한을 승격할 때 활성화 필요")])]),t._v(" "),a("p",[a("strong",[t._v("환경 변수")])]),t._v(" "),a("ul",[a("li",[t._v("빌드 과정에서 사용할 환경 변수 설정")]),t._v(" "),a("li",[t._v("일반 텍스트 또는 AWS Systems Manager Parameter Store, Secrets Manager 사용 가능")])]),t._v(" "),a("p",[a("strong",[t._v("Buildspec 설정")])]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("buildspec 파일 사용")]),t._v(": 소스 코드 루트의 "),a("code",[t._v("buildspec.yml")]),t._v(" 파일 사용 (권장)")]),t._v(" "),a("li",[a("strong",[t._v("빌드 명령 삽입")]),t._v(": 빌드 명령을 프로젝트 구성에 직접 저장")]),t._v(" "),a("li",[t._v("기본 파일명: "),a("code",[t._v("buildspec.yml")])]),t._v(" "),a("li",[t._v("커스텀 경로 지정 가능 (예: "),a("code",[t._v("configuration/buildspec.yml")]),t._v(")")])]),t._v(" "),a("h2",{attrs:{id:"주요-설정-항목-요약"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#주요-설정-항목-요약"}},[t._v("#")]),t._v(" 주요 설정 항목 요약")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("항목")]),t._v(" "),a("th",[t._v("설명")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("프로젝트 이름")]),t._v(" "),a("td",[t._v("2~255자, 영문/숫자/특수문자(-, _)")])]),t._v(" "),a("tr",[a("td",[t._v("소스 공급자")]),t._v(" "),a("td",[t._v("CodeCommit, GitHub, S3 등")])]),t._v(" "),a("tr",[a("td",[t._v("환경 이미지")]),t._v(" "),a("td",[t._v("관리형 이미지 또는 사용자 지정 이미지")])]),t._v(" "),a("tr",[a("td",[t._v("컴퓨팅 리소스")]),t._v(" "),a("td",[t._v("메모리 및 vCPU 선택")])]),t._v(" "),a("tr",[a("td",[t._v("서비스 역할")]),t._v(" "),a("td",[t._v("IAM 역할 자동 생성 또는 기존 역할 선택")])]),t._v(" "),a("tr",[a("td",[t._v("Buildspec")]),t._v(" "),a("td",[t._v("buildspec.yml 파일 사용 또는 직접 명령 입력")])])])]),t._v(" "),a("h2",{attrs:{id:"참고사항"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#참고사항"}},[t._v("#")]),t._v(" 참고사항")]),t._v(" "),a("ul",[a("li",[t._v("CodeBuild는 빌드 시간과 컴퓨팅 리소스 사용량에 따라 과금됩니다")]),t._v(" "),a("li",[t._v("빌드 로그는 CloudWatch Logs에 자동으로 저장됩니다")]),t._v(" "),a("li",[t._v("환경 변수는 빌드 보안을 위해 Parameter Store나 Secrets Manager 사용을 권장합니다")]),t._v(" "),a("li",[t._v("VPC 내부 리소스 접근이 필요한 경우 VPC 설정을 구성해야 합니다")])]),t._v(" "),a("h2",{attrs:{id:"권한-에러-해결"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#권한-에러-해결"}},[t._v("#")]),t._v(" 권한 에러 해결")]),t._v(" "),a("h3",{attrs:{id:"ecr-로그인-에러"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ecr-로그인-에러"}},[t._v("#")]),t._v(" ECR 로그인 에러")]),t._v(" "),a("p",[t._v("CodeBuild에서 ECR에 Docker 이미지를 푸시할 때 권한 에러가 발생할 수 있습니다. 이는 CodeBuild 서비스 역할에 ECR 접근 권한이 없기 때문입니다.")]),t._v(" "),a("p",[a("strong",[t._v("에러 예시:")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("Error: Cannot perform an operation on a public repository\nAn error occurred (AccessDenied) when calling the GetAuthorizationToken operation\n")])])]),a("h3",{attrs:{id:"해결-방법"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#해결-방법"}},[t._v("#")]),t._v(" 해결 방법")]),t._v(" "),a("h4",{attrs:{id:"_1-iam-역할-권한-추가"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-iam-역할-권한-추가"}},[t._v("#")]),t._v(" 1. IAM 역할 권한 추가")]),t._v(" "),a("ol",[a("li",[a("p",[a("strong",[t._v("IAM 콘솔 접속")])]),t._v(" "),a("ul",[a("li",[t._v("IAM → Roles → 역할 이름 선택 ("),a("code",[t._v("codebuild-pet-web-service-role")]),t._v(")")])])]),t._v(" "),a("li",[a("p",[a("strong",[t._v("권한 추가")])]),t._v(" "),a("ul",[a("li",[t._v("Permissions 탭 클릭")]),t._v(" "),a("li",[a("strong",[t._v("방법 1")]),t._v(": AWS 관리형 정책 추가\n"),a("ul",[a("li",[a("code",[t._v("AmazonEC2ContainerRegistryPowerUser")]),t._v(" (ECR 읽기/쓰기)")]),t._v(" "),a("li",[t._v("또는 "),a("code",[t._v("AmazonEC2ContainerRegistryFullAccess")]),t._v(" (전체 접근)")])])]),t._v(" "),a("li",[a("strong",[t._v("방법 2")]),t._v(": 인라인 정책 추가\n"),a("ul",[a("li",[t._v("필요한 ECR 권한만 선택적으로 추가")])])])])])]),t._v(" "),a("h4",{attrs:{id:"_2-필요한-ecr-권한"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-필요한-ecr-권한"}},[t._v("#")]),t._v(" 2. 필요한 ECR 권한")]),t._v(" "),a("p",[t._v("CodeBuild가 ECR에 이미지를 푸시하려면 다음 권한이 필요합니다:")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"Version"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"2012-10-17"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"Statement"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"Effect"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Allow"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"Action"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ecr:GetAuthorizationToken"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ecr:BatchCheckLayerAvailability"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ecr:GetDownloadUrlForLayer"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ecr:BatchGetImage"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ecr:PutImage"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ecr:InitiateLayerUpload"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ecr:UploadLayerPart"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ecr:CompleteLayerUpload"')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"Resource"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"*"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h4",{attrs:{id:"_3-amazon-q-활용"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-amazon-q-활용"}},[t._v("#")]),t._v(" 3. Amazon Q 활용")]),t._v(" "),a("p",[t._v("권한 설정이 복잡하거나 구체적인 권한이 필요한 경우, "),a("strong",[t._v("Amazon Q")]),t._v("에 질문하면 필요한 권한을 정확히 알려줍니다.")]),t._v(" "),a("p",[a("strong",[t._v("참고")]),t._v(": CodeBuild 서비스 역할은 프로젝트 생성 시 자동으로 생성되지만, 기본적으로 최소한의 권한만 부여됩니다. ECR, S3, CloudWatch Logs 등 사용하는 서비스에 대한 권한을 명시적으로 추가해야 합니다.")]),t._v(" "),a("TagLinks"),t._v(" "),a("Comment")],1)}),[],!1,null,null,null);s.default=v.exports}}]);