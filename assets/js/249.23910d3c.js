(window.webpackJsonp=window.webpackJsonp||[]).push([[249],{584:function(t,s,a){"use strict";a.r(s);var e=a(21),r=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"typeerror-fs-existssync-is-not-a-function"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#typeerror-fs-existssync-is-not-a-function"}},[t._v("#")]),t._v(" TypeError: fs.existsSync is not a function")]),t._v(" "),a("p",[a("code",[t._v('const desktopCapturer = require("electron").desktopCapturer;')]),t._v(" 이렇게 react 코드 내에서 electron의 메소드를 불러오면 "),a("code",[t._v("TypeError: fs.existsSync is not a function")]),t._v(" 이런 에러가 뜨게 됩니다")]),t._v(" "),a("h2",{attrs:{id:"원인"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#원인"}},[t._v("#")]),t._v(" 원인")]),t._v(" "),a("p",[t._v("주요 원인은 일렉트론 빌드와 react의 cra 빌드가 충돌나서 생기는 에러입니다")]),t._v(" "),a("p",[t._v("해결법은 아래와 같습니다")]),t._v(" "),a("h2",{attrs:{id:"해결"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#해결"}},[t._v("#")]),t._v(" 해결")]),t._v(" "),a("h3",{attrs:{id:"src-app-js"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#src-app-js"}},[t._v("#")]),t._v(" src/App.js")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" desktopCapturer "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"electron"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("desktopCapturer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" electron"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" ipcRenderer "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"electron"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("위 코드 대신 아래 코드로 바꾸면 정상 실행됩니다.")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" desktopCapturer "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"electron"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" electron "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" window"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"electron"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h2",{attrs:{id:"다른-해결법"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#다른-해결법"}},[t._v("#")]),t._v(" 다른 해결법")]),t._v(" "),a("p",[t._v("서칭을 해보니 ``window.require(xxx)`로 해결하는 방법이 좋지 않은 방법이라고 하네요.")]),t._v(" "),a("p",[t._v("그 레퍼런스에서는 yarn eject를 해서 webpack 설정을 바꾸는 방법으로 해결하고 있습니다.")]),t._v(" "),a("p",[t._v("저는 eject해서 얻는 장점보다 더 단점이 많다고 생각하는 사람이라 따라하지는 않았습니다 링크 걸어드리니 참조 하시면 좋을 것 같습니다~")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/electron/electron/issues/7300#issuecomment-496006781",target:"_blank",rel:"noopener noreferrer"}},[t._v("electron/electron#7300 (comment)"),a("OutboundLink")],1)])]),t._v(" "),a("h2",{attrs:{id:"참고"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#참고"}},[t._v("#")]),t._v(" 참고")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/electron/electron/issues/7300",target:"_blank",rel:"noopener noreferrer"}},[t._v("Requiring electron outside of main.js causes a TypeError #7300"),a("OutboundLink")],1)])]),t._v(" "),a("TagLinks"),t._v(" "),a("Comment")],1)}),[],!1,null,null,null);s.default=r.exports}}]);