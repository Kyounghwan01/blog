(window.webpackJsonp=window.webpackJsonp||[]).push([[109],{556:function(t,s,a){"use strict";a.r(s);var n=a(21),e=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"환경변수-설정"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#환경변수-설정"}},[t._v("#")]),t._v(" 환경변수 설정")]),t._v(" "),a("p",[t._v("보안에 치명적일 수 있는 데이터는 git에 올리지 않고 env라는 파일로 환경변수를 만들어 배포한 사이트에 변수를 설정하도록 합니다.")]),t._v(" "),a("p",[t._v("이 글에서는 local에서 작업할 때 react 내에서 env로 어떻게 환경변수로 접근하는지 알아보겠습니다!")]),t._v(" "),a("p",[t._v("아마 이 글을 보러 오신분들 대부분 "),a("code",[t._v("REACT_APP_XXX is undefined")]),t._v("이런 에러를 보았기 때문에 오셨을텐데요,")]),t._v(" "),a("p",[t._v("다른 포스팅에서는 "),a("code",[t._v('import dotenv from "dotenv')]),t._v(" 이것을 하면 잘된다고 하는데 저의 경우 "),a("code",[t._v("Can't resolve 'fs' when bundle with webpack")]),t._v(" 이런 에러가 뜨면서 더 진행이 안되었습니다. 그래서 아래와 같은 방법으로 해결하였습니다.")]),t._v(" "),a("h2",{attrs:{id:"해결"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#해결"}},[t._v("#")]),t._v(" 해결")]),t._v(" "),a("p",[t._v("간단하게 "),a("code",[t._v("dotenv-webpack")]),t._v("을 설치하고, "),a("code",[t._v("webpack.config.ts")]),t._v(" 또는 "),a("code",[t._v("webpack.config.js")]),t._v("에 작은 설정만 추가하면 됩니다.")]),t._v(" "),a("h3",{attrs:{id:"dotenv-webpack-설치"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dotenv-webpack-설치"}},[t._v("#")]),t._v(" dotenv-webpack 설치")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("yarn add dotenv-webpack\n")])])]),a("h3",{attrs:{id:"webpack-config-js"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#webpack-config-js"}},[t._v("#")]),t._v(" webpack.config.js")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Dotenv "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"dotenv-webpack"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  plugins"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Dotenv")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h2",{attrs:{id:"주의사항"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#주의사항"}},[t._v("#")]),t._v(" 주의사항")]),t._v(" "),a("ul",[a("li",[t._v("기본적으로 react에서 "),a("code",[t._v(".env")]),t._v("를 사용할때 무조건 변수 앞에 "),a("code",[t._v("REACT_APP_")]),t._v("를 붙여야 합니다. 즉, 우리가 "),a("code",[t._v("APIKEY")]),t._v("이런 변수를 만들고 싶을때는 "),a("code",[t._v("REACT_APP_APIKEY")]),t._v(" 이렇게 변수 설정을 해야한다는 뜻입니다.")]),t._v(" "),a("li",[a("code",[t._v(".env")]),t._v(" 변경시 프론트 서버를 껏다 켜야 적용됩니다.")])]),t._v(" "),a("h2",{attrs:{id:"next에서-dotenv-사용하기"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#next에서-dotenv-사용하기"}},[t._v("#")]),t._v(" next에서 dotenv 사용하기")]),t._v(" "),a("ul",[a("li",[t._v("next에서는 react와 다르게 설정을 해야합니다."),a("code",[t._v("webpack.config.ts")]),t._v("가 아닌 "),a("code",[t._v("next.config.js")]),t._v("에 아래와 같이 추가합니다.")]),t._v(" "),a("li",[t._v("typescript를 사용하더라도 "),a("code",[t._v("next.config.**js**")]),t._v("로 파일을 만드셔야 에러가 뜨지 않습니다.")])]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Dotenv "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"dotenv-webpack"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("withTM")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  reactStrictMode"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("webpack")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("config")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("plugins"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Dotenv")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" silent"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("h2",{attrs:{id:"nextjs에서-dotenv-사용시-주의사항"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nextjs에서-dotenv-사용시-주의사항"}},[t._v("#")]),t._v(" nextjs에서 dotenv 사용시 주의사항")]),t._v(" "),a("ul",[a("li",[t._v("nextjs는 env 사용시 "),a("code",[t._v("NEXT_PUBLIC_")]),t._v("를 붙여야 합니다. (react는 "),a("code",[t._v("REACT_APP_")]),t._v(")")])]),t._v(" "),a("TagLinks"),t._v(" "),a("Comment")],1)}),[],!1,null,null,null);s.default=e.exports}}]);