(window.webpackJsonp=window.webpackJsonp||[]).push([[238],{638:function(t,s,a){"use strict";a.r(s);var n=a(21),r=Object(n.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"apprunner-사용법"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#apprunner-사용법"}},[t._v("#")]),t._v(" apprunner 사용법")]),t._v(" "),a("h2",{attrs:{id:"app-runner-설정-가이드"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#app-runner-설정-가이드"}},[t._v("#")]),t._v(" App Runner 설정 가이드")]),t._v(" "),a("p",[t._v("App Runner는 AWS에서 제공하는 완전 관리형 컨테이너 애플리케이션 서비스입니다. 소스 코드나 컨테이너 이미지에서 자동으로 애플리케이션을 빌드하고 배포합니다.")]),t._v(" "),a("iframe",{staticStyle:{border:"1px solid #ccc"},attrs:{src:"/blog/apprunner.pdf",width:"100%",height:"800px"}}),t._v(" "),a("h2",{attrs:{id:"app-runner-개요"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#app-runner-개요"}},[t._v("#")]),t._v(" App Runner 개요")]),t._v(" "),a("p",[t._v("App Runner는 컨테이너 기반 애플리케이션을 쉽게 배포하고 운영할 수 있는 완전 관리형 서비스입니다. ECR 이미지를 기반으로 자동 스케일링, 로드 밸런싱, 모니터링을 제공합니다.")]),t._v(" "),a("h2",{attrs:{id:"⚠️-중요-사전-요구사항"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#⚠️-중요-사전-요구사항"}},[t._v("#")]),t._v(" ⚠️ 중요: 사전 요구사항")]),t._v(" "),a("p",[a("strong",[t._v("CodeBuild와 ECR 설정이 먼저 선행되어야 합니다!")])]),t._v(" "),a("p",[t._v("App Runner를 사용하기 전에 다음이 완료되어 있어야 합니다:")]),t._v(" "),a("ol",[a("li",[t._v("CodeBuild 프로젝트 설정 완료")]),t._v(" "),a("li",[t._v("ECR 리포지토리 생성 완료")]),t._v(" "),a("li",[t._v("CodeBuild를 통해 ECR에 이미지 푸시 완료")])]),t._v(" "),a("h2",{attrs:{id:"next-js-standalone-설정으로-인한-포트-설정"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#next-js-standalone-설정으로-인한-포트-설정"}},[t._v("#")]),t._v(" Next.js Standalone 설정으로 인한 포트 설정")]),t._v(" "),a("h3",{attrs:{id:"왜-필요한가"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#왜-필요한가"}},[t._v("#")]),t._v(" 왜 필요한가?")]),t._v(" "),a("p",[a("strong",[t._v("Standalone 모드 사용 이유:")])]),t._v(" "),a("ul",[a("li",[t._v("이미지 크기가 크게 줄어듭니다")]),t._v(" "),a("li",[t._v("배포 시간이 단축됩니다")]),t._v(" "),a("li",[t._v("불필요한 파일이 제외되어 효율적입니다")])]),t._v(" "),a("p",[a("strong",[t._v("포트 설정이 필요한 이유:")])]),t._v(" "),a("ul",[a("li",[t._v("Standalone 모드를 사용하면 자동 포트 변경이 작동하지 않습니다")]),t._v(" "),a("li",[t._v("App Runner는 기본적으로 포트 8080을 사용합니다")]),t._v(" "),a("li",[t._v("명시적으로 포트를 지정해야 합니다")])]),t._v(" "),a("h3",{attrs:{id:"_1-app-runner-환경-변수-설정"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-app-runner-환경-변수-설정"}},[t._v("#")]),t._v(" 1. App Runner 환경 변수 설정")]),t._v(" "),a("p",[a("strong",[t._v("설정 경로:")])]),t._v(" "),a("ul",[a("li",[t._v("App Runner → 배포 요소 선택 → 구성 → 편집 버튼 클릭")]),t._v(" "),a("li",[t._v("서비스 구성 → 환경 변수 섹션")])]),t._v(" "),a("p",[a("strong",[t._v("필요한 환경 변수:")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("PORT")]),t._v(": "),a("code",[t._v("8080")])]),t._v(" "),a("li",[a("code",[t._v("HOSTNAME")]),t._v(": "),a("code",[t._v("0.0.0.0")])]),t._v(" "),a("li",[a("code",[t._v("NODE_ENV")]),t._v(": "),a("code",[t._v("production")])])]),t._v(" "),a("h3",{attrs:{id:"_2-server-js-파일-생성"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-server-js-파일-생성"}},[t._v("#")]),t._v(" 2. server.js 파일 생성")]),t._v(" "),a("p",[t._v("프로젝트 루트에 "),a("code",[t._v("server.js")]),t._v(" 파일을 생성합니다:")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/* eslint-disable @typescript-eslint/no-require-imports */")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" createServer "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" parse "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'url'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" next "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'next'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" dev "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NODE_ENV")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'production'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" hostname "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("HOSTNAME")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'0.0.0.0'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" port "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("parseInt")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("PORT")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8080")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" app "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" dev"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" hostname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" port "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" handle "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getRequestHandler")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\napp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("prepare")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("createServer")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" parsedUrl "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("parse")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("handle")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" parsedUrl"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Error occurred handling'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("url"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("statusCode "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),t._v("\n      res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("end")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'internal server error'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("once")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'error'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("err")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("error")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("err"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("exit")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("port"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" hostname"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("> Ready on http://")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("hostname"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("port"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[a("strong",[t._v("주요 설정:")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("hostname")]),t._v(": "),a("code",[t._v("0.0.0.0")]),t._v("으로 설정하여 모든 네트워크 인터페이스에서 수신")]),t._v(" "),a("li",[a("code",[t._v("port")]),t._v(": 환경 변수 "),a("code",[t._v("PORT")]),t._v("에서 읽거나 기본값 8080 사용")]),t._v(" "),a("li",[t._v("에러 핸들링 및 로깅 포함")])]),t._v(" "),a("h3",{attrs:{id:"_3-apprunner-yml-파일-설정"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-apprunner-yml-파일-설정"}},[t._v("#")]),t._v(" 3. apprunner.yml 파일 설정")]),t._v(" "),a("p",[t._v("프로젝트 루트에 "),a("code",[t._v("apprunner.yml")]),t._v(" 파일을 생성합니다:")]),t._v(" "),a("div",{staticClass:"language-yaml extra-class"},[a("pre",{pre:!0,attrs:{class:"language-yaml"}},[a("code",[a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("runtime")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" nodejs20\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("build")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("commands")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("build")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" npm ci "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("cache .npm "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("prefer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("offline\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" npm run build\n"),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("runtime-version")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("20")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("command")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" node server.js\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("network")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("port")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8080")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("env")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" PORT\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"8080"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" HOSTNAME\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0.0.0.0"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" NODE_ENV\n      "),a("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("value")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"production"')]),t._v("\n")])])]),a("p",[a("strong",[t._v("설정 설명:")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("runtime")]),t._v(": Node.js 20 사용")]),t._v(" "),a("li",[a("code",[t._v("build.commands")]),t._v(": 빌드 명령어 (npm ci, npm run build)")]),t._v(" "),a("li",[a("code",[t._v("run.command")]),t._v(": 실행 명령어 ("),a("code",[t._v("node server.js")]),t._v(")")]),t._v(" "),a("li",[a("code",[t._v("run.network.port")]),t._v(": 포트 8080 지정")]),t._v(" "),a("li",[a("code",[t._v("run.env")]),t._v(": 환경 변수 설정")])]),t._v(" "),a("h3",{attrs:{id:"_4-next-config-js-설정"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-next-config-js-설정"}},[t._v("#")]),t._v(" 4. next.config.js 설정")]),t._v(" "),a("p",[t._v("Next.js 설정 파일에 standalone 모드 활성화:")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/** @type {import('next').NextConfig} */")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" nextConfig "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  output"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'standalone'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// ... 기타 설정")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" nextConfig\n")])])]),a("h2",{attrs:{id:"app-runner-서비스-생성"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#app-runner-서비스-생성"}},[t._v("#")]),t._v(" App Runner 서비스 생성")]),t._v(" "),a("h3",{attrs:{id:"_1-소스-선택"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-소스-선택"}},[t._v("#")]),t._v(" 1. 소스 선택")]),t._v(" "),a("ul",[a("li",[t._v("ECR 리포지토리 선택")]),t._v(" "),a("li",[t._v("이미지 태그 지정 (예: "),a("code",[t._v("latest")]),t._v(")")])]),t._v(" "),a("h3",{attrs:{id:"_2-서비스-설정"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-서비스-설정"}},[t._v("#")]),t._v(" 2. 서비스 설정")]),t._v(" "),a("ul",[a("li",[t._v("서비스 이름 입력")]),t._v(" "),a("li",[t._v("CPU 및 메모리 설정")]),t._v(" "),a("li",[t._v("자동 스케일링 설정")])]),t._v(" "),a("h3",{attrs:{id:"_3-배포-설정"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-배포-설정"}},[t._v("#")]),t._v(" 3. 배포 설정")]),t._v(" "),a("ul",[a("li",[t._v("자동 배포 활성화 (ECR 이미지 업데이트 시 자동 배포)")]),t._v(" "),a("li",[t._v("수동 배포도 가능")])]),t._v(" "),a("h2",{attrs:{id:"주요-기능"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#주요-기능"}},[t._v("#")]),t._v(" 주요 기능")]),t._v(" "),a("h3",{attrs:{id:"자동-스케일링"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#자동-스케일링"}},[t._v("#")]),t._v(" 자동 스케일링")]),t._v(" "),a("ul",[a("li",[t._v("트래픽에 따라 자동으로 인스턴스 수 조정")]),t._v(" "),a("li",[t._v("최소/최대 인스턴스 수 설정 가능")])]),t._v(" "),a("h3",{attrs:{id:"로드-밸런싱"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#로드-밸런싱"}},[t._v("#")]),t._v(" 로드 밸런싱")]),t._v(" "),a("ul",[a("li",[t._v("자동으로 트래픽 분산")]),t._v(" "),a("li",[t._v("고가용성 보장")])]),t._v(" "),a("h3",{attrs:{id:"모니터링"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#모니터링"}},[t._v("#")]),t._v(" 모니터링")]),t._v(" "),a("ul",[a("li",[t._v("CloudWatch와 통합")]),t._v(" "),a("li",[t._v("로그 및 메트릭 자동 수집")])]),t._v(" "),a("h2",{attrs:{id:"비용"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#비용"}},[t._v("#")]),t._v(" 비용")]),t._v(" "),a("ul",[a("li",[t._v("인스턴스 시간당 요금")]),t._v(" "),a("li",[t._v("데이터 전송 비용")]),t._v(" "),a("li",[t._v("사용한 만큼만 과금 (온디맨드)")])]),t._v(" "),a("h2",{attrs:{id:"참고사항"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#참고사항"}},[t._v("#")]),t._v(" 참고사항")]),t._v(" "),a("ul",[a("li",[t._v("App Runner는 현재 도쿄 리전(ap-northeast-1)에서만 제공됩니다")]),t._v(" "),a("li",[t._v("서울 리전이 필요한 경우 ECS나 다른 서비스를 고려해야 합니다")]),t._v(" "),a("li",[t._v("ECR 이미지가 업데이트되면 자동으로 새 배포가 트리거됩니다")]),t._v(" "),a("li",[t._v("환경 변수는 서비스 구성에서 관리할 수 있습니다")]),t._v(" "),a("li",[t._v("Custom domain 연결이 가능합니다")])]),t._v(" "),a("TagLinks"),t._v(" "),a("Comment")],1)}),[],!1,null,null,null);s.default=r.exports}}]);